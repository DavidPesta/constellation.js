define(["lib/underscore","lib/backbone"],function(e,t){var n=t.Model.extend({UPDATE:"update",items:[],type:"",selectionSize:function(){return this.items.length},setSelection:function(e){this.setType(e[0]),this.items=e,this.update()},setType:function(e){e=e.substr(0,1).toLowerCase(),this.type.length&&this.type!==e&&this.deselectAll(),this.type=e},toggle:function(e){return this.setType(e),this.select(e)?!0:(this.deselect(e),!1)},select:function(t){return this.setType(t),e.contains(this.items,t)?!1:(this.items.push(t),this.update(),!0)},deselect:function(t){return e.contains(this.items,t)?(this.items.splice(e.indexOf(this.items,t),1),this.update(),!0):!1},deselectAll:function(e){this.items.length=0,this.type="",e||this.update()},update:function(){this.trigger(this.UPDATE)}});return new n})